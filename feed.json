{
    "version": "https://jsonfeed.org/version/1",
    "title": null,
    "subtitle": null,
    "icon": "http://matsubarakanon.github.io/images/favicon.ico",
    "description": "MatsubaraKanon的博客",
    "home_page_url": "http://MatsubaraKanon.github.io",
    "items": [
        {
            "id": "http://matsubarakanon.github.io/2021/06/20/Java/MyBatis%E7%9A%84%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84/",
            "url": "http://matsubarakanon.github.io/2021/06/20/Java/MyBatis%E7%9A%84%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84/",
            "title": "MyBatis的关联关系映射",
            "date_published": "2021-06-20T11:27:51.810Z",
            "content_html": "<h1 id=\"mybatis的关联关系映射\"><a class=\"anchor\" href=\"#mybatis的关联关系映射\">#</a> MyBatis 的关联关系映射</h1>\n<h2 id=\"环境准备\"><a class=\"anchor\" href=\"#环境准备\">#</a> 环境准备</h2>\n<h3 id=\"数据库设计\"><a class=\"anchor\" href=\"#数据库设计\">#</a> 数据库设计</h3>\n<table>\n<thead>\n<tr>\n<th>表名</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>user</td>\n<td>用户表</td>\n</tr>\n<tr>\n<td>items</td>\n<td>商品表</td>\n</tr>\n<tr>\n<td>orders</td>\n<td>订单表</td>\n</tr>\n<tr>\n<td>orderdetail</td>\n<td>订单明细表</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"user用户表\"><a class=\"anchor\" href=\"#user用户表\">#</a> user（用户表）</h4>\n<p><img data-src=\"C:%5CUsers%5C25442%5CAppData%5CLocal%5CTemp%5CRar$DIa48164.34162%5Cimages%5Cimage-20200901153445839.png\" alt=\"image-20200901153445839\" /></p>\n<h4 id=\"items商品表\"><a class=\"anchor\" href=\"#items商品表\">#</a> items（商品表）</h4>\n<p><img data-src=\"C:%5CUsers%5C25442%5CAppData%5CLocal%5CTemp%5CRar$DIa48164.34162%5Cimages%5Cimage-20200901153516187.png\" alt=\"image-20200901153516187\" /></p>\n<h4 id=\"orders订单主表\"><a class=\"anchor\" href=\"#orders订单主表\">#</a> orders（订单主表）</h4>\n<p><img data-src=\"C:%5CUsers%5C25442%5CAppData%5CLocal%5CTemp%5CRar$DIa48164.34162%5Cimages%5Cimage-20200901153557911.png\" alt=\"image-20200901153557911\" /></p>\n<h4 id=\"orderdetail订单明细表\"><a class=\"anchor\" href=\"#orderdetail订单明细表\">#</a> orderdetail（订单明细表）</h4>\n<p><img data-src=\"C:%5CUsers%5C25442%5CAppData%5CLocal%5CTemp%5CRar$DIa48164.34162%5Cimages%5Cimage-20200901153630682.png\" alt=\"image-20200901153630682\" /></p>\n<h3 id=\"表关系分析\"><a class=\"anchor\" href=\"#表关系分析\">#</a> 表关系分析</h3>\n<p><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * from user;#用户表，存储用户相关信息</span><br><span class=\"line\">select * from items;#商品表，存储商品信息</span><br><span class=\"line\">select * from orders;#订单主表</span><br><span class=\"line\">select * from orderdetail;#订单明细表</span><br><span class=\"line\"></span><br><span class=\"line\">#订单与订单明细</span><br><span class=\"line\"></span><br><span class=\"line\">#张三在淘宝店（同一家店）购买了1部台式机，1部笔记本</span><br><span class=\"line\">insert into orders(user_id,number,createtime,note) values(10,1,now(),&#x27;发顺丰&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">#在明细中添加商品的信息</span><br><span class=\"line\">insert into orderdetail(orders_id,items_id,items_num) values(6,1,1);</span><br><span class=\"line\">insert into orderdetail(orders_id,items_id,items_num) values(6,2,1);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">#用户表：没有任何外键</span><br><span class=\"line\">#商品表：没有任何外键</span><br><span class=\"line\">#订单主表：有用户ID外键</span><br><span class=\"line\">#订单明细表：订单主表ID、商品ID</span><br><span class=\"line\"></span><br><span class=\"line\">#用户与订单主表：一对多</span><br><span class=\"line\">#订单与订单明细：一对多</span><br><span class=\"line\">#订单明细与商品：一对一</span><br><span class=\"line\">#一个订单对应一个用户：一对一</span><br><span class=\"line\">#用户表与商品表：多对多</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"一对一\"><a class=\"anchor\" href=\"#一对一\">#</a> 一对一</h2>\n<h3 id=\"概述\"><a class=\"anchor\" href=\"#概述\">#</a> 概述</h3>\n<ul>\n<li>在 <code>MyBatis</code>  中，实现一对一查询的方式有两种，分别使用 <code>resultType</code>  和 <code>resultMap</code>  属性实现一对一查询。</li>\n<li>关联查询的<mark>字段比较少</mark>的情况下合适使用 <code>resultType</code>  属性实现一对一关联映射。</li>\n<li>关联查询的<mark>字段比较多</mark>的情况下适合使用 <code>resultMap</code>  属性实现一对一关联映射。</li>\n</ul>\n<h3 id=\"环境准备-2\"><a class=\"anchor\" href=\"#环境准备-2\">#</a> 环境准备</h3>\n<h4 id=\"创建user类\"><a class=\"anchor\" href=\"#创建user类\">#</a> 创建 User 类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.manong.entity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 用户类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date birthday;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String sex;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getId</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setId</span><span class=\"params\">(Integer id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getUsername</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> username;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUsername</span><span class=\"params\">(String username)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.username = username;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">getBirthday</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setBirthday</span><span class=\"params\">(Date birthday)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.birthday = birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSex</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSex</span><span class=\"params\">(String sex)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.sex = sex;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAddress</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAddress</span><span class=\"params\">(String address)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.address = address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"创建orders类\"><a class=\"anchor\" href=\"#创建orders类\">#</a> 创建 Orders 类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.manong.entity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Orders</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer user_id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String number;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date createTime;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String note;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getId</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setId</span><span class=\"params\">(Integer id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getUser_id</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> user_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUser_id</span><span class=\"params\">(Integer user_id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.user_id = user_id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getNumber</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> number;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNumber</span><span class=\"params\">(String number)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.number = number;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">getCreateTime</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> createTime;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setCreateTime</span><span class=\"params\">(Date createTime)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.createTime = createTime;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getNote</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> note;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNote</span><span class=\"params\">(String note)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.note = note;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"使用resulttype属性实现一对一\"><a class=\"anchor\" href=\"#使用resulttype属性实现一对一\">#</a> 使用 resultType 属性实现一对一</h3>\n<h4 id=\"需求\"><a class=\"anchor\" href=\"#需求\">#</a> 需求</h4>\n<blockquote>\n<p>查询订单信息及该订单的所属的用户信息</p>\n</blockquote>\n<h4 id=\"sql语句\"><a class=\"anchor\" href=\"#sql语句\">#</a> SQL 语句</h4>\n<p><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 查询订单信息及该订单的用户名称</span><br><span class=\"line\">select o.*,u.username from orders o inner join user u on u.id = o.user_id</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"修改orders类\"><a class=\"anchor\" href=\"#修改orders类\">#</a> 修改 Orders 类</h4>\n<p>（1）在 Orders 类中添加关联属性名称，该属性名称必须与表中的列名或别名一致。</p>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//用户名称</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> String username; <span class=\"comment\">//该属性必须与数据库表的列名或别名一致</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getUsername</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> username;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUsername</span><span class=\"params\">(String username)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.username = username;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>（2）在 Orders 类中重写 toString () 方法。</p>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Orders&#123;&quot;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;id=&quot;</span> + id +</span><br><span class=\"line\">            <span class=\"string\">&quot;, user_id=&quot;</span> + user_id +</span><br><span class=\"line\">            <span class=\"string\">&quot;, number=&#x27;&quot;</span> + number + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;, createTime=&quot;</span> + createTime +</span><br><span class=\"line\">            <span class=\"string\">&quot;, note=&#x27;&quot;</span> + note + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">            <span class=\"string\">&quot;, username=&#x27;&quot;</span> + username + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">            <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ordersmapper\"><a class=\"anchor\" href=\"#ordersmapper\">#</a> OrdersMapper</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OrdersMapper</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 查询订单信息及该订单的所属用户</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;Orders&gt; <span class=\"title\">findOrderListWithUser</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ordersmapperxml\"><a class=\"anchor\" href=\"#ordersmapperxml\">#</a> OrdersMapper.xml</h4>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findOrderListWithUser&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.manong.entity.Orders&quot;</span>&gt;</span></span><br><span class=\"line\">    select o.*,u.username from orders o</span><br><span class=\"line\">    inner join user u on u.id = o.user_id</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类\"><a class=\"anchor\" href=\"#测试类\">#</a> 测试类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 案例1：使用ResultType实现一对一查询</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取SqlSession</span></span><br><span class=\"line\">    SqlSession sqlSession = MyBatisUtil.createSqlSession();</span><br><span class=\"line\">    <span class=\"comment\">//获取OrdersMapper实例</span></span><br><span class=\"line\">    OrdersMapper mapper = sqlSession.getMapper(OrdersMapper.class);</span><br><span class=\"line\">    <span class=\"comment\">//调用查询订单信息的方法</span></span><br><span class=\"line\">    List&lt;Orders&gt; orderListWithUser = mapper.findOrderListWithUser();</span><br><span class=\"line\">    <span class=\"comment\">//循环遍历</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Orders orders : orderListWithUser) &#123;</span><br><span class=\"line\">        System.out.println(orders);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">    MyBatisUtil.closeSqlSession(sqlSession);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"使用resultmap属性实现一对一\"><a class=\"anchor\" href=\"#使用resultmap属性实现一对一\">#</a> 使用 resultMap 属性实现一对一</h3>\n<h4 id=\"需求-2\"><a class=\"anchor\" href=\"#需求-2\">#</a> 需求</h4>\n<blockquote>\n<p>查询订单信息及该订单的所属的用户信息</p>\n</blockquote>\n<h4 id=\"sql语句-2\"><a class=\"anchor\" href=\"#sql语句-2\">#</a> SQL 语句</h4>\n<p><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 查询订单信息及该订单的用户名称select o.*,u.username from orders o inner join user u on u.id = o.user_id</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"修改orders类-2\"><a class=\"anchor\" href=\"#修改orders类-2\">#</a> 修改 Orders 类</h4>\n<p>在 Orders 类中，添加 User 类的对象属性，关键代码如下所示：</p>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//使用resultMap配置一对一，使用类类型private User user; //用户对象public User getUser() &#123;    return user;&#125;public void setUser(User user) &#123;    this.user = user;&#125;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ordersmapper-2\"><a class=\"anchor\" href=\"#ordersmapper-2\">#</a> OrdersMapper</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 查询订单信息及该订单的所属用户</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">List&lt;Orders&gt; <span class=\"title\">getOrderListWithUser</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ordersmapperxml-2\"><a class=\"anchor\" href=\"#ordersmapperxml-2\">#</a> OrdersMapper.xml</h4>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 定义基础的ResultMap映射 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BaseResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.Orders&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;id&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;user_id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;user_id&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;number&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;number&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;createTime&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;createTime&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;note&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;note&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 配置关联用户的映射信息 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;ordersUserResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.Orders&quot;</span> <span class=\"attr\">extends</span>=<span class=\"string\">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 关联用户信息 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- association标签：配置一对一关联 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- property属性：填写实体类的属性名 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- javaType属性：该属性的数据类型 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;user&quot;</span> <span class=\"attr\">javaType</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;uid&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;username&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;birthday&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;birthday&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;sex&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 使用ResultMap实现一对一查询 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getOrderListWithUser&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;ordersUserResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">    select</span><br><span class=\"line\">    o.*,</span><br><span class=\"line\">    u.id uid,</span><br><span class=\"line\">    u.username,</span><br><span class=\"line\">    u.birthday,</span><br><span class=\"line\">    u.sex</span><br><span class=\"line\">    from</span><br><span class=\"line\">    orders o</span><br><span class=\"line\">    inner join user u on u.id = o.user_id</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类-2\"><a class=\"anchor\" href=\"#测试类-2\">#</a> 测试类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 案例2：使用ResultMap实现一对一查询</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取SqlSession</span></span><br><span class=\"line\">    SqlSession sqlSession = MyBatisUtil.createSqlSession();</span><br><span class=\"line\">    <span class=\"comment\">//获取OrdersMapper实例</span></span><br><span class=\"line\">    OrdersMapper mapper = sqlSession.getMapper(OrdersMapper.class);</span><br><span class=\"line\">    <span class=\"comment\">//调用查询订单信息的方法</span></span><br><span class=\"line\">    List&lt;Orders&gt; orderListWithUser = mapper.getOrderListWithUser();</span><br><span class=\"line\">    <span class=\"comment\">//循环遍历</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Orders orders : orderListWithUser) &#123;</span><br><span class=\"line\">        System.out.println(orders+<span class=\"string\">&quot;====&gt;&quot;</span>+orders.getUser().getUsername()+<span class=\"string\">&quot;====&gt;&quot;</span>+</span><br><span class=\"line\">                           orders.getUser().getBirthday());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">    MyBatisUtil.closeSqlSession(sqlSession);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"一对多\"><a class=\"anchor\" href=\"#一对多\">#</a> 一对多</h2>\n<h3 id=\"案例1查询订单及订单明细\"><a class=\"anchor\" href=\"#案例1查询订单及订单明细\">#</a> 案例 1：查询订单及订单明细</h3>\n<h4 id=\"sql语句-3\"><a class=\"anchor\" href=\"#sql语句-3\">#</a> SQL 语句</h4>\n<p><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#查询订单及该订单明细信息</span><br><span class=\"line\">select o.*,d.id,d.orders_id,d.items_id,d.items_num from orders o</span><br><span class=\"line\">inner join orderdetail d on o.id = d.orders_id</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"修改orders类-3\"><a class=\"anchor\" href=\"#修改orders类-3\">#</a> 修改 Orders 类</h4>\n<p>在 Orders 类中添加订单明细类的集合属性，关键代码如下所示：</p>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//一对多：一个订单有多个订单明细</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> List&lt;OrderDetail&gt; orderDetailList;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> List&lt;OrderDetail&gt; <span class=\"title\">getOrderDetailList</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> orderDetailList;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOrderDetailList</span><span class=\"params\">(List&lt;OrderDetail&gt; orderDetailList)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.orderDetailList = orderDetailList;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ordersmapper-3\"><a class=\"anchor\" href=\"#ordersmapper-3\">#</a> OrdersMapper</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** * 查询订单信息及该订单的所有明细列表 * <span class=\"doctag\">@return</span> */</span><span class=\"function\">List&lt;Orders&gt; <span class=\"title\">findOrderListWithDetail</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ordersmapperxml-3\"><a class=\"anchor\" href=\"#ordersmapperxml-3\">#</a> OrdersMapper.xml</h4>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 定义基础的ResultMap映射 --&gt;</span><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BaseResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.Orders&quot;</span>&gt;</span>    <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;id&quot;</span>/&gt;</span>    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;user_id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;user_id&quot;</span>/&gt;</span>    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;number&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;number&quot;</span>/&gt;</span>    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;createTime&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;createTime&quot;</span>/&gt;</span>    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;note&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;note&quot;</span>/&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span><span class=\"comment\">&lt;!-- 配置关联订单明细的映射信息 --&gt;</span><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;orderAndDetailResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.Orders&quot;</span> <span class=\"attr\">extends</span>=<span class=\"string\">&quot;BaseResultMap&quot;</span>&gt;</span>    <span class=\"comment\">&lt;!-- 一对多：一个订单下有多个明细 --&gt;</span>    <span class=\"comment\">&lt;!-- collection标签：配置一对多 --&gt;</span>    <span class=\"comment\">&lt;!-- property属性：填写实体类的属性名称 --&gt;</span>    <span class=\"comment\">&lt;!-- ofType属性：该属性名称的数据类型 --&gt;</span>    <span class=\"tag\">&lt;<span class=\"name\">collection</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;orderDetailList&quot;</span> <span class=\"attr\">ofType</span>=<span class=\"string\">&quot;com.manong.entity.OrderDetail&quot;</span>&gt;</span>        <span class=\"comment\">&lt;!-- 当表之间的主键列名一致时，需要给其中一个表的主键列名设置别名 --&gt;</span>        <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;order_detail_id&quot;</span>/&gt;</span>        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;ordersId&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;orders_id&quot;</span>/&gt;</span>        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;itemsId&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;items_id&quot;</span>/&gt;</span>        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;itemsNum&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;items_num&quot;</span>/&gt;</span>    <span class=\"tag\">&lt;/<span class=\"name\">collection</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span><span class=\"comment\">&lt;!-- 查询订单及订单明细 --&gt;</span><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findOrderListWithDetail&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;orderAndDetailResultMap&quot;</span>&gt;</span>    select      o.*,      d.id as order_detail_id,      d.orders_id,      d.items_id,      d.items_num    from      orders o      inner join orderdetail d on o.id = d.orders_id<span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类-3\"><a class=\"anchor\" href=\"#测试类-3\">#</a> 测试类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** * 案例3：查询订单及订单明细 */</span><span class=\"meta\">@Testpublic</span> <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">test3</span><span class=\"params\">()</span></span>&#123;    <span class=\"comment\">//获取SqlSession    SqlSession sqlSession = MyBatisUtil.createSqlSession();    //获取OrdersMapper实例    OrdersMapper mapper = sqlSession.getMapper(OrdersMapper.class);    //调用查询订单信息的方法    List&lt;Orders&gt; ordersList = mapper.findOrderListWithDetail();    //循环遍历    for (Orders orders : ordersList) &#123;        System.out.println(&quot;订单主键：&quot;+orders.getId()+&quot;,订单号码：&quot;+orders.getNumber());        //内循环：循环遍历明细集合        for (OrderDetail orderDetail : orders.getOrderDetailList()) &#123;            System.out.println(orderDetail);        &#125;    &#125;    //关闭资源    MyBatisUtil.closeSqlSession(sqlSession);&#125;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"案例2查询订单关联用户信息及订单明细\"><a class=\"anchor\" href=\"#案例2查询订单关联用户信息及订单明细\">#</a> 案例 2：查询订单 (关联用户信息) 及订单明细</h3>\n<h4 id=\"sql语句-4\"><a class=\"anchor\" href=\"#sql语句-4\">#</a> SQL 语句</h4>\n<p><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#查询订单(关联用户信息)及订单明细select o.*,d.id,d.orders_id,d.items_id,d.items_num,u.username from orders oinner join orderdetail d on o.id = d.orders_idinner join user u on u.id = o.user_id</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"修改orders类-4\"><a class=\"anchor\" href=\"#修改orders类-4\">#</a> 修改 Orders 类</h4>\n<blockquote>\n<p>同上面的案例 1 代码一致</p>\n</blockquote>\n<h4 id=\"ordersmapper-4\"><a class=\"anchor\" href=\"#ordersmapper-4\">#</a> OrdersMapper</h4>\n<blockquote>\n<p>同上面的案例 1 代码一致</p>\n</blockquote>\n<h4 id=\"ordersmapperxml-4\"><a class=\"anchor\" href=\"#ordersmapperxml-4\">#</a> OrdersMapper.xml</h4>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 定义基础的ResultMap映射 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BaseResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.Orders&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;id&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;user_id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;user_id&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;number&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;number&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;createTime&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;createTime&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;note&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;note&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 配置关联用户的映射信息 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;ordersUserResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.Orders&quot;</span> <span class=\"attr\">extends</span>=<span class=\"string\">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 关联用户信息 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- association标签：配置一对一关联 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- property属性：填写实体类的属性名 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- javaType属性：该属性的数据类型 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;user&quot;</span> <span class=\"attr\">javaType</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;uid&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;username&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;birthday&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;birthday&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;sex&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 配置关联订单明细的映射信息 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;orderAndDetailResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.Orders&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">           <span class=\"attr\">extends</span>=<span class=\"string\">&quot;ordersUserResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 一对多：一个订单下有多个明细 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- collection标签：配置一对多 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- property属性：填写实体类的属性名称 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- ofType属性：该属性名称的数据类型 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">collection</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;orderDetailList&quot;</span> <span class=\"attr\">ofType</span>=<span class=\"string\">&quot;com.manong.entity.OrderDetail&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 当表之间的主键列名一致时，需要给其中一个表的主键列名设置别名 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;order_detail_id&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;ordersId&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;orders_id&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;itemsId&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;items_id&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;itemsNum&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;items_num&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">collection</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 查询订单及订单明细 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findOrderListWithDetail&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;orderAndDetailResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">    select</span><br><span class=\"line\">      o.*,</span><br><span class=\"line\">      d.id as order_detail_id,</span><br><span class=\"line\">      d.orders_id,</span><br><span class=\"line\">      d.items_id,</span><br><span class=\"line\">      d.items_num,</span><br><span class=\"line\">      u.username</span><br><span class=\"line\">    from</span><br><span class=\"line\">      orders o</span><br><span class=\"line\">      inner join orderdetail d on o.id = d.orders_id</span><br><span class=\"line\">      inner join user u on u.id = o.user_id</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类-4\"><a class=\"anchor\" href=\"#测试类-4\">#</a> 测试类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 案例3：查询订单及订单明细</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test3</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取SqlSession</span></span><br><span class=\"line\">    SqlSession sqlSession = MyBatisUtil.createSqlSession();</span><br><span class=\"line\">    <span class=\"comment\">//获取OrdersMapper实例</span></span><br><span class=\"line\">    OrdersMapper mapper = sqlSession.getMapper(OrdersMapper.class);</span><br><span class=\"line\">    <span class=\"comment\">//调用查询订单信息的方法</span></span><br><span class=\"line\">    List&lt;Orders&gt; ordersList = mapper.findOrderListWithDetail();</span><br><span class=\"line\">    <span class=\"comment\">//循环遍历</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Orders orders : ordersList) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;订单主键：&quot;</span>+orders.getId()+<span class=\"string\">&quot;,订单号码：&quot;</span>+orders.getNumber()+</span><br><span class=\"line\">                           <span class=\"string\">&quot;,用户姓名：&quot;</span>+orders.getUser().getUsername());</span><br><span class=\"line\">        <span class=\"comment\">//内循环：循环遍历明细集合</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (OrderDetail orderDetail : orders.getOrderDetailList()) &#123;</span><br><span class=\"line\">            System.out.println(orderDetail);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">    MyBatisUtil.closeSqlSession(sqlSession);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"多对多\"><a class=\"anchor\" href=\"#多对多\">#</a> 多对多</h2>\n<h3 id=\"需求分析\"><a class=\"anchor\" href=\"#需求分析\">#</a> 需求分析</h3>\n<blockquote>\n<p>需求：查询用户信息及用户所购买的商品信息</p>\n<p>#用户表和商品表（多对多）<br />\n#1. 找到用户与订单表的关系（一对多）-----&gt; 在用户类中添加订单的集合<br />\n #2. 找到订单表与订单明细的关系（一对多）-----&gt; 在订单类中添加明细的集合<br />\n #3. 找到明细表与商品表的关系（一对一） -----&gt; 在明细类中添加商品对象</p>\n</blockquote>\n<h3 id=\"sql语句-5\"><a class=\"anchor\" href=\"#sql语句-5\">#</a> SQL 语句</h3>\n<p><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select </span><br><span class=\"line\">  u.*,</span><br><span class=\"line\">  o.id as order_order_id,</span><br><span class=\"line\">  o.user_id,</span><br><span class=\"line\">  o.`number`,</span><br><span class=\"line\">  o.createtime,</span><br><span class=\"line\">  d.id as detail_id,</span><br><span class=\"line\">  d.items_id,</span><br><span class=\"line\">  d.items_num,</span><br><span class=\"line\">  i.id as item_items_id,</span><br><span class=\"line\">  i.`name`,</span><br><span class=\"line\">  i.price</span><br><span class=\"line\">from</span><br><span class=\"line\">  user u </span><br><span class=\"line\">inner join orders o on u.id = o.user_id</span><br><span class=\"line\">inner join orderdetail d on o.id = d.orders_id</span><br><span class=\"line\">inner join items i on d.`items_id` = i.id</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"修改实体类\"><a class=\"anchor\" href=\"#修改实体类\">#</a> 修改实体类</h3>\n<h4 id=\"user\"><a class=\"anchor\" href=\"#user\">#</a> User</h4>\n<blockquote>\n<p>在用户类中添加订单的集合，关键代码如下：</p>\n</blockquote>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//1.一对多：一个用户可以有多个订单</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> List&lt;Orders&gt; ordersList;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> List&lt;Orders&gt; <span class=\"title\">getOrdersList</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ordersList;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOrdersList</span><span class=\"params\">(List&lt;Orders&gt; ordersList)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.ordersList = ordersList;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"orders\"><a class=\"anchor\" href=\"#orders\">#</a> Orders</h4>\n<blockquote>\n<p>在订单类中添加订单明细的集合，关键代码如下：</p>\n</blockquote>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//2.一对多：一个订单有多个订单明细</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> List&lt;OrderDetail&gt; orderDetailList;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> List&lt;OrderDetail&gt; <span class=\"title\">getOrderDetailList</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> orderDetailList;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOrderDetailList</span><span class=\"params\">(List&lt;OrderDetail&gt; orderDetailList)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.orderDetailList = orderDetailList;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"orderdetail\"><a class=\"anchor\" href=\"#orderdetail\">#</a> OrderDetail</h4>\n<blockquote>\n<p>在订单明细类中添加商品对象，关键代码如下：</p>\n</blockquote>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//3.一对一：一个明细对应一件商品</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> Items items;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Items <span class=\"title\">getItems</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> items;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setItems</span><span class=\"params\">(Items items)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.items = items;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"usermapper\"><a class=\"anchor\" href=\"#usermapper\">#</a> UserMapper</h3>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 查询用户信息及该用户所购买的商品信息</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;User&gt; <span class=\"title\">findUserListWithItemsInfo</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"usermapperxml\"><a class=\"anchor\" href=\"#usermapperxml\">#</a> UserMapper.xml</h3>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.manong.dao.UserMapper&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 基础ResultMap --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BaseResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;id&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;username&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;birthday&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;birthday&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;sex&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 配置关联订单信息 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;userItemResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span> <span class=\"attr\">extends</span>=<span class=\"string\">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 一对多:配置订单关联 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">collection</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;ordersList&quot;</span> <span class=\"attr\">ofType</span>=<span class=\"string\">&quot;com.manong.entity.Orders&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;order_order_id&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;user_id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;user_id&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;number&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;number&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;createTime&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;createTime&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;note&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;note&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 配置订单关联订单明细 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">collection</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;orderDetailList&quot;</span> <span class=\"attr\">ofType</span>=<span class=\"string\">&quot;com.manong.entity.OrderDetail&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 当表之间的主键列名一致时，需要给其中一个表的主键列名设置别名 --&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;detail_id&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;itemsId&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;items_id&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;itemsNum&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;items_num&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 配置一对一：一个明细对应一件商品 --&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;items&quot;</span> <span class=\"attr\">javaType</span>=<span class=\"string\">&quot;com.manong.entity.Items&quot;</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;item_items_id&quot;</span> /&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;name&quot;</span>/&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;price&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;price&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">collection</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">collection</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findUserListWithItemsInfo&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;userItemResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">        select</span><br><span class=\"line\">          u.*,</span><br><span class=\"line\">          o.id as order_order_id,</span><br><span class=\"line\">          o.user_id,</span><br><span class=\"line\">          o.`number`,</span><br><span class=\"line\">          o.createtime,</span><br><span class=\"line\">          d.id as detail_id,</span><br><span class=\"line\">          d.items_id,</span><br><span class=\"line\">          d.items_num,</span><br><span class=\"line\">          i.id as item_items_id,</span><br><span class=\"line\">          i.`name`,</span><br><span class=\"line\">          i.price</span><br><span class=\"line\">        from</span><br><span class=\"line\">          user u</span><br><span class=\"line\">        inner join orders o on u.id = o.user_id</span><br><span class=\"line\">        inner join orderdetail d on o.id = d.orders_id</span><br><span class=\"line\">        inner join items i on d.`items_id` = i.id</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"测试类-5\"><a class=\"anchor\" href=\"#测试类-5\">#</a> 测试类</h3>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 案例4：查询用户及用户所购买的商品信息</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test4</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取SqlSession</span></span><br><span class=\"line\">    SqlSession sqlSession = MyBatisUtil.createSqlSession();</span><br><span class=\"line\">    <span class=\"comment\">//获取UserMapper实例</span></span><br><span class=\"line\">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">    <span class=\"comment\">//调用方法</span></span><br><span class=\"line\">    List&lt;User&gt; userList = mapper.findUserListWithItemsInfo();</span><br><span class=\"line\">    <span class=\"comment\">//循环遍历</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (User user : userList) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;用户名：&quot;</span>+user.getUsername());</span><br><span class=\"line\">        <span class=\"comment\">//循环订单信息</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Orders orders : user.getOrdersList()) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;\\t订单编号：&quot;</span>+orders.getNumber());</span><br><span class=\"line\">            <span class=\"comment\">//循环订单明细</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (OrderDetail orderDetail : orders.getOrderDetailList()) &#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;\\t\\t商品名称:&quot;</span>+orderDetail.getItems().getName());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">    MyBatisUtil.closeSqlSession(sqlSession);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n",
            "tags": []
        },
        {
            "id": "http://matsubarakanon.github.io/2021/06/20/Java/SQL%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6/",
            "url": "http://matsubarakanon.github.io/2021/06/20/Java/SQL%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6/",
            "title": "SQL映射文件",
            "date_published": "2021-06-20T10:37:08.927Z",
            "content_html": "<h1 id=\"sql映射文件\"><a class=\"anchor\" href=\"#sql映射文件\">#</a> SQL 映射文件</h1>\n<h2 id=\"sql映射文件-2\"><a class=\"anchor\" href=\"#sql映射文件-2\">#</a> SQL 映射文件</h2>\n<p>MyBatis 的真正强大在于它的语句映射，这是它的魔力所在。由于它的异常强大，<span class=\"exturl\" data-url=\"aHR0cHM6Ly9teWJhdGlzLm9yZy9teWJhdGlzLTMvemgvc3FsbWFwLXhtbC5odG1s\">映射器</span>的 XML 文件就显得相对简单。如果拿它跟具有相同功能的 JDBC 代码进行对比，你会立即发现省掉了将近 95% 的代码。MyBatis 致力于减少使用成本，让用户能更专注于 SQL 代码。</p>\n<p>SQL 映射文件只有很少的几个顶级元素（按照应被定义的顺序列出）：</p>\n<ul>\n<li><code>mapper</code> - 映射文件的根元素节点，只有一个属性 namespace 命名空间，其作用如下：\n<ul>\n<li>用于区分不同的 mapper，全局唯一。</li>\n<li>绑定 Dao 接口，即面向接口编程。当 namespace 绑定某一接口之后，可以不用写该接口的实现类，MyBatis 会通过接口的完整限定名查找对应的 mapper 配置来执行 SQL 语句。因此 namespace 的命名必须跟接口同名。</li>\n</ul>\n</li>\n<li><code>cache</code>  – 该命名空间的缓存配置。</li>\n<li><code>cache-ref</code>  – 引用其它命名空间的缓存配置。</li>\n<li><code>resultMap</code>  – 描述如何从数据库结果集中加载对象，是最复杂也是最强大的元素。</li>\n<li>&lt;del&gt; <code>parameterMap</code>  – 老式风格的参数映射。此元素已被废弃，并可能在将来被移除！请使用行内参数映射。文档中不会介绍此元素。&lt;/del&gt;</li>\n<li><code>sql</code>  – 可被其它语句引用的可重用语句块。</li>\n<li><code>insert</code>  – 映射插入语句。</li>\n<li><code>update</code>  – 映射更新语句。</li>\n<li><code>delete</code>  – 映射删除语句。</li>\n<li><code>select</code>  – 映射查询语句。</li>\n</ul>\n<h2 id=\"多参数入参\"><a class=\"anchor\" href=\"#多参数入参\">#</a> 多参数入参</h2>\n<h3 id=\"概述\"><a class=\"anchor\" href=\"#概述\">#</a> 概述</h3>\n<p>在 MyBatis 中，多个参数入参是不允许的，也就是说方法中只能传入一个参数，在实际应用中，方法的参数 (参数个数、参数数据类型) 会有各式各样的选择，根据不同的业务需要选择相应的入参方式。</p>\n<p>实现多参数入参常用的方式有 3 种，分别是： <code>@Param注解入参</code> 、 <code>类对象入参</code> ， <code>map集合入参</code> 。</p>\n<h3 id=\"方式一param注解入参\"><a class=\"anchor\" href=\"#方式一param注解入参\">#</a> 方式一：@Param 注解入参</h3>\n<h4 id=\"需求\"><a class=\"anchor\" href=\"#需求\">#</a> 需求</h4>\n<p>根据用户名 ( <code>userCode</code> ) 和性别 ( <code>gender</code> ) 多条件查询</p>\n<h4 id=\"mapper接口\"><a class=\"anchor\" href=\"#mapper接口\">#</a> Mapper 接口</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.manong.dao;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.manong.entity.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.annotations.Param;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 根据用户编码和性别查询用户信息</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> userCode</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> gender</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"comment\">//方法中的参数一旦加入@Param注解，映射文件中的占位符必须与@Param注解的名称一致</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;User&gt; <span class=\"title\">findUserList</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;userCode&quot;)</span> String userCode,<span class=\"meta\">@Param(&quot;sex&quot;)</span> <span class=\"keyword\">int</span> gender)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"mapper映射文件\"><a class=\"anchor\" href=\"#mapper映射文件\">#</a> Mapper 映射文件</h4>\n<p><mark>注意：多参数入参，使用 @Param 注解，映射文件中的占位符必须是 @Param 注解中的名称，且名称严格区分大小写</mark></p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">mapper</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.manong.dao.UserMapper&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 多参数入参，使用@Param注解，映射文件中的占位符必须是@Param注解中的名称，且名称严格区分大小写 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findUserList&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from smbms_user where userCode like concat(&#x27;%&#x27;,#&#123;userCode&#125;,&#x27;%&#x27;) </span><br><span class=\"line\">        and gender = #&#123;sex&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类\"><a class=\"anchor\" href=\"#测试类\">#</a> 测试类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    SqlSession sqlSession = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//读取mybatis配置文件</span></span><br><span class=\"line\">        InputStream inputStream = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//创建会话工厂对象</span></span><br><span class=\"line\">        SqlSessionFactory sessionFactory = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class=\"line\">        <span class=\"comment\">//打开Session</span></span><br><span class=\"line\">        sqlSession = sessionFactory.openSession();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//通过动态代理方式获取UserMapper接口</span></span><br><span class=\"line\">        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">        <span class=\"comment\">//调用根据用户名查询用户列表的方法</span></span><br><span class=\"line\">        List&lt;User&gt; userList = userMapper.findUserList(<span class=\"string\">&quot;a&quot;</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (User user : userList) &#123;</span><br><span class=\"line\">            System.out.println(user);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        <span class=\"comment\">//判断session是否为空，不为空则关闭资源</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(sqlSession!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            sqlSession.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"小结\"><a class=\"anchor\" href=\"#小结\">#</a> 小结</h4>\n<ul>\n<li>多参数入参，使用 @Param 注解，映射文件中的占位符必须是 @Param 注解中的名称，且名称严格区分大小写</li>\n<li>多参数入参，接口中的方法参数必须加入 @Param 注解</li>\n</ul>\n<h3 id=\"方式二类对象入参\"><a class=\"anchor\" href=\"#方式二类对象入参\">#</a> 方式二：类对象入参</h3>\n<h4 id=\"需求-2\"><a class=\"anchor\" href=\"#需求-2\">#</a> 需求</h4>\n<p>根据用户名 ( <code>userCode</code> ) 和性别 ( <code>gender</code> ) 多条件查询</p>\n<h4 id=\"定义vo类\"><a class=\"anchor\" href=\"#定义vo类\">#</a> 定义 VO 类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.manong.vo;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.manong.entity.User;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 自定义条件类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserVo</span> <span class=\"keyword\">extends</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"mapper接口-2\"><a class=\"anchor\" href=\"#mapper接口-2\">#</a> Mapper 接口</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 根据用户编码和性别查询用户信息</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> userVo</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">//方法中的参数使用类类型，映射文件中的占位必须是实体类的属性名</span></span><br><span class=\"line\"><span class=\"function\">List&lt;User&gt; <span class=\"title\">findUserListByUserVo</span><span class=\"params\">(UserVo userVo)</span></span>;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"mapper映射文件-2\"><a class=\"anchor\" href=\"#mapper映射文件-2\">#</a> Mapper 映射文件</h4>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 方法参数如果是类类型，映射文件中的占位符必须是实体类的属性名（严格区分大小写） --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findUserListByUserVo&quot;</span>  <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">    select * from smbms_user where userCode like concat(&#x27;%&#x27;,#&#123;userCode&#125;,&#x27;%&#x27;) </span><br><span class=\"line\">    and gender = #&#123;gender&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"mybatilsutil工具类\"><a class=\"anchor\" href=\"#mybatilsutil工具类\">#</a> MyBatilsUtil 工具类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.manong.utils;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.io.Resources;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBatisUtil</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> SqlSessionFactory factory;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"keyword\">static</span>&#123;<span class=\"comment\">//在静态代码块下，factory只会被创建一次</span></span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;static factory===============&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">         InputStream is = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">         factory = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder().build(is);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">         <span class=\"comment\">// TODO Auto-generated catch block</span></span><br><span class=\"line\">         e.printStackTrace();</span><br><span class=\"line\">      &#125; </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SqlSession <span class=\"title\">createSqlSession</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> factory.openSession(<span class=\"keyword\">false</span>);<span class=\"comment\">//true 为自动提交事务</span></span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">closeSqlSession</span><span class=\"params\">(SqlSession sqlSession)</span></span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(<span class=\"keyword\">null</span> != sqlSession) </span><br><span class=\"line\">         sqlSession.close();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类-2\"><a class=\"anchor\" href=\"#测试类-2\">#</a> 测试类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取SqlSession</span></span><br><span class=\"line\">    SqlSession sqlSession = MyBatisUtil.createSqlSession();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//获取UserMapper实例</span></span><br><span class=\"line\">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">        <span class=\"comment\">//创建对象，保存查询条件</span></span><br><span class=\"line\">        UserVo userVo = <span class=\"keyword\">new</span> UserVo();</span><br><span class=\"line\">        userVo.setUserCode(<span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\">        userVo.setGender(<span class=\"number\">2</span>);</span><br><span class=\"line\">        <span class=\"comment\">//调用查询的方法</span></span><br><span class=\"line\">        List&lt;User&gt; userList = mapper.findUserListByUserVo(userVo);</span><br><span class=\"line\">        <span class=\"comment\">//循环遍历</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (User user : userList) &#123;</span><br><span class=\"line\">            System.out.println(user);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        MyBatisUtil.closeSqlSession(sqlSession);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"小结-2\"><a class=\"anchor\" href=\"#小结-2\">#</a> 小结</h4>\n<ul>\n<li>方法参数如果是类类型，映射文件中的占位符必须是实体类的属性名（严格区分大小写）</li>\n</ul>\n<h4 id=\"拓展\"><a class=\"anchor\" href=\"#拓展\">#</a> 拓展</h4>\n<p>如果 Mapper 接口中的方法参数类型是类类型且同时又使用了 @Param 注解，如以下代码所示：</p>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 根据用户编码和性别查询用户信息</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> userVo</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">List&lt;User&gt; <span class=\"title\">findUserListByUserVoAndParam</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;user&quot;)</span> UserVo userVo)</span></span>;</span><br></pre></td></tr></table></figure></p>\n<p>那么映射文件该怎么做呢？</p>\n<blockquote>\n<p>方法参数如果是类类型 (该参数加入了 <code>@Param</code>  注解)，映射文件中的占位符 &quot; <code>注解名称.实体类的属性名</code>  &quot;（严格区分大小写）</p>\n</blockquote>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 方法参数如果是类类型(该参数加入了@Param注解)，映射文件中的占位符&quot;注解名称.实体类的属性名&quot;（严格区分大小写） --&gt;</span><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findUserListByUserVoAndParam&quot;</span>  <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span>    select * from smbms_user where userCode like concat(&#x27;%&#x27;,#&#123;user.userCode&#125;,&#x27;%&#x27;)     and gender = #&#123;user.gender&#125;<span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"方式三map集合入参\"><a class=\"anchor\" href=\"#方式三map集合入参\">#</a> 方式三：Map 集合入参</h3>\n<h4 id=\"需求-3\"><a class=\"anchor\" href=\"#需求-3\">#</a> 需求</h4>\n<p>根据用户名 ( <code>userCode</code> ) 和性别 ( <code>gender</code> ) 多条件查询</p>\n<h4 id=\"mapper接口-3\"><a class=\"anchor\" href=\"#mapper接口-3\">#</a> Mapper 接口</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** * 根据用户编码和性别查询用户信息 * <span class=\"doctag\">@param</span> map * <span class=\"doctag\">@return</span> */</span><span class=\"comment\">//方法参数使用Map集合入参，映射文件中的占位符必须与Map集合的key一致List&lt;User&gt; findUserListByMap(Map&lt;String,Object&gt; map);</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"mapper映射文件-3\"><a class=\"anchor\" href=\"#mapper映射文件-3\">#</a> Mapper 映射文件</h4>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 方法参数使用Map集合入参，映射文件中的占位符必须与Map集合的key一致 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findUserListByMap&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">    select * from smbms_user where userCode like concat(&#x27;%&#x27;,#&#123;userCode&#125;,&#x27;%&#x27;) </span><br><span class=\"line\">    and gender = #&#123;gender&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类-3\"><a class=\"anchor\" href=\"#测试类-3\">#</a> 测试类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test4</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取SqlSession</span></span><br><span class=\"line\">    SqlSession sqlSession = MyBatisUtil.createSqlSession();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//获取UserMapper实例</span></span><br><span class=\"line\">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">        <span class=\"comment\">//创建Map集合，保存查询条件</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;String,Object&gt;();</span><br><span class=\"line\">        map.put(<span class=\"string\">&quot;userCode&quot;</span>,<span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\">        map.put(<span class=\"string\">&quot;gender&quot;</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"comment\">//调用查询的方法</span></span><br><span class=\"line\">        List&lt;User&gt; userList = mapper.findUserListByMap(map);</span><br><span class=\"line\">        <span class=\"comment\">//循环遍历</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (User user : userList) &#123;</span><br><span class=\"line\">            System.out.println(user);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        MyBatisUtil.closeSqlSession(sqlSession);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"小结-3\"><a class=\"anchor\" href=\"#小结-3\">#</a> 小结</h4>\n<p>方法参数使用 Map 集合入参，映射文件中的占位符必须与 Map 集合的 key 一致</p>\n<h2 id=\"insert新增\"><a class=\"anchor\" href=\"#insert新增\">#</a> insert 新增</h2>\n<h3 id=\"mapper接口-4\"><a class=\"anchor\" href=\"#mapper接口-4\">#</a> Mapper 接口</h3>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 添加用户</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> user</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">addUser</span><span class=\"params\">(User user)</span></span>;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"mapper映射文件-4\"><a class=\"anchor\" href=\"#mapper映射文件-4\">#</a> Mapper 映射文件</h3>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 新增 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- useGeneratedKeys:使用自动增长（获取主键） --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- keyProperty：填写主键属性字段 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;addUser&quot;</span> <span class=\"attr\">useGeneratedKeys</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">keyProperty</span>=<span class=\"string\">&quot;id&quot;</span>&gt;</span></span><br><span class=\"line\">    insert into smbms_user (userCode,userPassword,gender) </span><br><span class=\"line\">    values(#&#123;userCode&#125;,#&#123;userPassword&#125;,#&#123;gender&#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"测试类-4\"><a class=\"anchor\" href=\"#测试类-4\">#</a> 测试类</h3>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test5</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取SqlSession</span></span><br><span class=\"line\">    SqlSession sqlSession = MyBatisUtil.createSqlSession();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//获取UserMapper实例</span></span><br><span class=\"line\">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">        <span class=\"comment\">//创建对象保存用户信息</span></span><br><span class=\"line\">        User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">        user.setUserCode(<span class=\"string\">&quot;bbb&quot;</span>);</span><br><span class=\"line\">        user.setUserPassword(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        user.setGender(<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"comment\">//调用新增的方法</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(mapper.addUser(user)&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;新增成功&quot;</span>);</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;当前用户主键：&quot;</span>+user.getId());</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;新增失败&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//提交事务</span></span><br><span class=\"line\">        sqlSession.commit();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">        <span class=\"comment\">//回滚事务</span></span><br><span class=\"line\">        sqlSession.rollback();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        MyBatisUtil.closeSqlSession(sqlSession);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"update修改\"><a class=\"anchor\" href=\"#update修改\">#</a> update 修改</h2>\n<h3 id=\"mapper接口-5\"><a class=\"anchor\" href=\"#mapper接口-5\">#</a> Mapper 接口</h3>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 修改用户</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> user</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">updateUser</span><span class=\"params\">(User user)</span></span>;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"mapper映射文件-5\"><a class=\"anchor\" href=\"#mapper映射文件-5\">#</a> Mapper 映射文件</h3>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 修改 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">update</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;updateUser&quot;</span>&gt;</span></span><br><span class=\"line\">    update smbms_user set userCode = #&#123;userCode&#125;,</span><br><span class=\"line\">\tuserPassword=#&#123;userPassword&#125;,gender=#&#123;gender&#125; where id = #&#123;id&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">update</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"测试类-5\"><a class=\"anchor\" href=\"#测试类-5\">#</a> 测试类</h3>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test6</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取SqlSession</span></span><br><span class=\"line\">    SqlSession sqlSession = MyBatisUtil.createSqlSession();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//获取UserMapper实例</span></span><br><span class=\"line\">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">        <span class=\"comment\">//创建对象保存用户信息</span></span><br><span class=\"line\">        User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">        user.setUserCode(<span class=\"string\">&quot;eee&quot;</span>);</span><br><span class=\"line\">        user.setUserPassword(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        user.setGender(<span class=\"number\">1</span>);</span><br><span class=\"line\">        user.setId(<span class=\"number\">23</span>);</span><br><span class=\"line\">        <span class=\"comment\">//调用修改的方法</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(mapper.updateUser(user)&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;修改成功&quot;</span>);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;修改失败&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//提交事务</span></span><br><span class=\"line\">        sqlSession.commit();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">        <span class=\"comment\">//回滚事务</span></span><br><span class=\"line\">        sqlSession.rollback();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        MyBatisUtil.closeSqlSession(sqlSession);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"delete删除\"><a class=\"anchor\" href=\"#delete删除\">#</a> delete 删除</h2>\n<h3 id=\"mapper接口-6\"><a class=\"anchor\" href=\"#mapper接口-6\">#</a> Mapper 接口</h3>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 根据主键删除用户</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> id</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">deleteById</span><span class=\"params\">(<span class=\"keyword\">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"mapper映射文件-6\"><a class=\"anchor\" href=\"#mapper映射文件-6\">#</a> Mapper 映射文件</h3>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 删除 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">delete</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;deleteById&quot;</span>&gt;</span></span><br><span class=\"line\">    delete from smbms_user where id = #&#123;id&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">delete</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"测试类-6\"><a class=\"anchor\" href=\"#测试类-6\">#</a> 测试类</h3>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test7</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取SqlSession</span></span><br><span class=\"line\">    SqlSession sqlSession = MyBatisUtil.createSqlSession();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//获取UserMapper实例</span></span><br><span class=\"line\">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">        <span class=\"comment\">//调用删除的方法</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(mapper.deleteById(<span class=\"number\">23</span>)&gt;<span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;删除成功&quot;</span>);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;删除失败&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//提交事务</span></span><br><span class=\"line\">        sqlSession.commit();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">        <span class=\"comment\">//回滚事务</span></span><br><span class=\"line\">        sqlSession.rollback();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        MyBatisUtil.closeSqlSession(sqlSession);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"resultmap\"><a class=\"anchor\" href=\"#resultmap\">#</a> ResultMap</h2>\n<p><code>resultMap</code>  元素是用来描述如何将结果集映射到 Java 对象， <code>resultMap</code>  元素是 MyBatis 中最重要最强大的元素。</p>\n<h3 id=\"为什么要使用resultmap元素\"><a class=\"anchor\" href=\"#为什么要使用resultmap元素\">#</a> 为什么要使用 ResultMap 元素</h3>\n<p>在之前的查询案例中，所使用的返回值类型属性采用的是 resultType 属性，使用该属性需要注意的是：<mark>数据库表的列名或别名必须与实体类的属性名保持一致，如果不一致，则无法查询数据</mark>。</p>\n<p>在实际开发中，实体类的属性名与数据库表中的列名是不可能完全一致，该如何解决属性名与列名不一致的问题呢？可以通过定义一个 resultMap 对列名和属性名之间作一个映射。</p>\n<h3 id=\"resultmap的使用场景\"><a class=\"anchor\" href=\"#resultmap的使用场景\">#</a> resultMap 的使用场景</h3>\n<ol>\n<li>如果查询出来的列名和实体类的属性名不一致，可以定义一个 resultMap 对列名和实体类属性名之间作一个映射关系。</li>\n<li>mybatis 实现高级结果映射（一对一、一对多、多对多）。</li>\n</ol>\n<h3 id=\"restultmap的使用方法\"><a class=\"anchor\" href=\"#restultmap的使用方法\">#</a> RestultMap 的使用方法</h3>\n<h4 id=\"mapper接口-7\"><a class=\"anchor\" href=\"#mapper接口-7\">#</a> Mapper 接口</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 查询用户列表</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">List&lt;User&gt; <span class=\"title\">findUserList</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"mapper映射文件-7\"><a class=\"anchor\" href=\"#mapper映射文件-7\">#</a> Mapper 映射文件</h4>\n<h5 id=\"定义resultmap元素\"><a class=\"anchor\" href=\"#定义resultmap元素\">#</a> 定义 ResultMap 元素</h5>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 1.定义resultMap --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- id属性：名称自定义且唯一 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- type属性：数据类型 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;userResultMap&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- id标签:配置主键属性 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- property属性：配置实体类的属性名称(严格区分大小写) --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- column属性：配置表中的列名或别名(不区分大小写) --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;id&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- result标签:配置普通属性(非主键) --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;userCode&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;userCode&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;userName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;realName&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;gender&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;sex&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;phone&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;phone&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 当实体类的属性名与表中的列名或别名一致时，可以省略该属性的配置，原因：默认的自动映射级别为PARTIAL --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h5 id=\"使用resultmap代替resulttype\"><a class=\"anchor\" href=\"#使用resultmap代替resulttype\">#</a> 使用 resultMap 代替 resultType</h5>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findUserList&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;userResultMap&quot;</span>&gt;</span></span><br><span class=\"line\">    select id,userCode,userName as realName,gender as sex ,address,phone,birthday from smbms_user</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类-7\"><a class=\"anchor\" href=\"#测试类-7\">#</a> 测试类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test7</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取SqlSession对象</span></span><br><span class=\"line\">    SqlSession sqlSession = MyBatisUtil.createSqlSession();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//获取UserMapper实例</span></span><br><span class=\"line\">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">        <span class=\"comment\">//调用查询方法</span></span><br><span class=\"line\">        List&lt;User&gt; userList = mapper.findUserList();</span><br><span class=\"line\">        <span class=\"comment\">//循环遍历</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (User user : userList) &#123;</span><br><span class=\"line\">            System.out.println(user);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        MyBatisUtil.closeSqlSession(sqlSession);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"resultmap和resulttype区别\"><a class=\"anchor\" href=\"#resultmap和resulttype区别\">#</a> ResultMap 和 ResultType 区别</h3>\n<ol>\n<li>resultType 直接表示返回值类型，包括基础数据类型和复杂数据类型</li>\n<li>resultMap 则是对外部 resultMap 定义的引用，对应外部 resultMap 的 id，表示返回结果映射到哪一个 resultMap 上。一般应用在数据库表中的列名与实体类属性名不一致的情况下或者是配置复杂的关联关系中使用。</li>\n<li>resultType 和 resultMap 都是 Map 数据结构，但是两者不能同时使用，只能二选一使用。</li>\n</ol>\n<h3 id=\"resultmap的自动映射\"><a class=\"anchor\" href=\"#resultmap的自动映射\">#</a> ResultMap 的自动映射</h3>\n<p>在 MyBatis 中，ResultMap 默认的自动映射级别是 PARTIAL，可以在 MyBatis 配置文件中的 <code>&lt;setting&gt;</code>  标签中修改自动映射级别，如下代码所示：</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">settings</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 设置日志 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">setting</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;logImpl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 设置自动映射级别 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- NONE:禁止自动匹配 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- PARTIAL:默认值，自动匹配(关联属性无法匹配) --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- FULL:自动匹配（可以匹配关联属性） --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--&lt;setting name=&quot;autoMappingBehavior&quot; value=&quot;NONE&quot;/&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n",
            "tags": []
        },
        {
            "id": "http://matsubarakanon.github.io/2021/06/20/Java/MyBatis%E5%85%A5%E9%97%A8/",
            "url": "http://matsubarakanon.github.io/2021/06/20/Java/MyBatis%E5%85%A5%E9%97%A8/",
            "title": "MyBatis入门",
            "date_published": "2021-06-19T16:05:51.210Z",
            "content_html": "<h1 id=\"mybatis入门\"><a class=\"anchor\" href=\"#mybatis入门\">#</a> MyBatis 入门</h1>\n<h2 id=\"初始mybatis\"><a class=\"anchor\" href=\"#初始mybatis\">#</a> 初始 MyBatis</h2>\n<h3 id=\"mybatis框架简介\"><a class=\"anchor\" href=\"#mybatis框架简介\">#</a> MyBatis 框架简介</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9teWJhdGlzLm9yZy9teWJhdGlzLTMvemgvaW5kZXguaHRtbA==\">MyBatis</span> 是一个优秀的开源的数据持久层框架，在实体类和 SQL 语句之间建立映射关系，是一个半自动化的 ORM (对象关系映射) 框架。</p>\n<p>MyBatis 内部封装了 JDBC 访问数据库的操作，支持普通的 SQL 查询，存储过程和高级映射，几乎消除了所有的 JDBC 代码和参数的手工设置以及结果集的检索。</p>\n<p>MyBatis 作为持久层框架，其主要思想是将程序中的大量 SQL 语句分离出来，配置在配置文件中，实现 SQL 的灵活配置，将 SQL 语句与程序代码分离，可以在不修改程序代码的情况下，直接在配置文件中修改 SQL 语句。</p>\n<p>MyBatis 的前身是 iBatis，是 Apache 的一个开源项目，2010 年这个项目由 Apache Software Foundation 迁移到了 Google Code，并更名为 MyBatis。2013 年又迁移到 GitHub。</p>\n<h3 id=\"mybatis的优缺点\"><a class=\"anchor\" href=\"#mybatis的优缺点\">#</a> MyBatis 的优缺点</h3>\n<hr />\n<h4 id=\"优点\"><a class=\"anchor\" href=\"#优点\">#</a> 优点</h4>\n<ul>\n<li>性能优越，并且小巧灵活，简单易学。</li>\n<li>解除 sql 与程序代码的耦合。</li>\n<li>提供映射标签，支持对象与数据库的 orm 字段关系映射</li>\n<li>提供对象关系映射标签，支持对象关系组建维护</li>\n<li>提供 xml 标签，支持编写动态 sql。</li>\n</ul>\n<h4 id=\"缺点\"><a class=\"anchor\" href=\"#缺点\">#</a> 缺点</h4>\n<ul>\n<li>编写 SQL 语句时工作量很大，尤其是字段多、关联表多时，更是如此。</li>\n<li>SQL 语句依赖于数据库，导致数据库移植性差，不能更换数据库。</li>\n</ul>\n<h2 id=\"mybatis入门-2\"><a class=\"anchor\" href=\"#mybatis入门-2\">#</a> MyBatis 入门</h2>\n<h3 id=\"安装mybatis\"><a class=\"anchor\" href=\"#安装mybatis\">#</a> 安装 MyBatis</h3>\n<p>要使用 MyBatis， 只需将 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL215YmF0aXMvbXliYXRpcy0zL3JlbGVhc2Vz\">mybatis-x.x.x.jar</span> 文件置于类路径（classpath）中即可。</p>\n<p>如果使用 Maven 来构建项目，则需将下面的依赖代码置于 pom.xml 文件中：</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.mybatis<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 需要指定版本号 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>x.x.x<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"搭建mybatis环境\"><a class=\"anchor\" href=\"#搭建mybatis环境\">#</a> 搭建 MyBatis 环境</h3>\n<h4 id=\"实现步骤\"><a class=\"anchor\" href=\"#实现步骤\">#</a> 实现步骤</h4>\n<ol>\n<li>下载 MyBatis 需要的 jar 文件或添加相关 maven 依赖</li>\n<li>创建 MyBatis 核心配置文件 (mybatis-config.xml)</li>\n<li>创建持久化类和 SQL 映射文件</li>\n<li>创建测试类</li>\n</ol>\n<h4 id=\"添加mybatis相关依赖\"><a class=\"anchor\" href=\"#添加mybatis相关依赖\">#</a> 添加 MyBatis 相关依赖</h4>\n<blockquote>\n<p>在 pom.xml 文件中加入 mybatis、mysql 和 junit 单元测试依赖，关键代码如下：</p>\n</blockquote>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 添加相关依赖坐标 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- mybatis --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.mybatis<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.4.5<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- mysql --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.19<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 单元测试 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.13<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"创建mybatis核心配置文件\"><a class=\"anchor\" href=\"#创建mybatis核心配置文件\">#</a> 创建 MyBatis 核心配置文件</h4>\n<p>​\t\tMyBatis 核心配置文件<mark>主要用于配置数据库连接和 MyBatis 运行时所需的各种特性</mark>，包含了设置和影响 MyBatis 行为的属性。为了方便管理框架所需要的配置文件，一般在 resources 目录下创建 MyBatis 配置文件，配置文件名称自定义，此处命名为 <code>mybatis-config.xml</code> ，配置文件代码如下所示：</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">configuration</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 配置数据库环境 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 该default属性必填，指定的值必须是存在的 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environments</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;mysql&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- environment标签：用于配置数据库环境 --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- id属性：在整个应用环境中必须唯一 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;mysql&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 事务管理器:JDBC、Manage --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">transactionManager</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 数据源：POOLED,JNDI,UNPOOLED --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dataSource</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;POOLED&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 数据库驱动 --&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driver&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 数据库连接地址 --&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;jdbc:mysql://localhost:3306/smbms?useUnicode=true<span class=\"symbol\">&amp;amp;</span>characterEncoding=utf-8<span class=\"symbol\">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 数据库用户名 --&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;root&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 数据库密码 --&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;root&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dataSource</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environments</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"创建持久化类实体类\"><a class=\"anchor\" href=\"#创建持久化类实体类\">#</a> 创建持久化类 (实体类)</h4>\n<p>在 MyBatis 中，实体类名称不需要与数据库表名一致，因为 MyBatis 是 POJO 与 SQL 语句之间的映射机制，一般情况下，保证 POJO 实体类的属性名称与数据库表的字段名一致即可。</p>\n<p>&lt;font color=red&gt; 注意：实体类属性名不一定与数据库表中的字段名一致，只是建议一致。&lt;/font&gt;</p>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.manong.entity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer id; <span class=\"comment\">//id</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userCode; <span class=\"comment\">//用户编码</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName; <span class=\"comment\">//用户名称</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userPassword; <span class=\"comment\">//用户密码</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer gender; <span class=\"comment\">//性别</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date birthday; <span class=\"comment\">//出生日期</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String phone; <span class=\"comment\">//电话</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address; <span class=\"comment\">//地址</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer userRole; <span class=\"comment\">//用户角色</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer createdBy; <span class=\"comment\">//创建者</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date creationDate; <span class=\"comment\">//创建时间</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer modifyBy; <span class=\"comment\">//更新者</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date modifyDate; <span class=\"comment\">//更新时间</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getId</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setId</span><span class=\"params\">(Integer id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getUserCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> userCode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUserCode</span><span class=\"params\">(String userCode)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.userCode = userCode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getUserName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> userName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUserName</span><span class=\"params\">(String userName)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.userName = userName;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getUserPassword</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> userPassword;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUserPassword</span><span class=\"params\">(String userPassword)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.userPassword = userPassword;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getGender</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> gender;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setGender</span><span class=\"params\">(Integer gender)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.gender = gender;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">getBirthday</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setBirthday</span><span class=\"params\">(Date birthday)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.birthday = birthday;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getPhone</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> phone;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setPhone</span><span class=\"params\">(String phone)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.phone = phone;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getAddress</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAddress</span><span class=\"params\">(String address)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.address = address;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getUserRole</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> userRole;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUserRole</span><span class=\"params\">(Integer userRole)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.userRole = userRole;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getCreatedBy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> createdBy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setCreatedBy</span><span class=\"params\">(Integer createdBy)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.createdBy = createdBy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">getCreationDate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> creationDate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setCreationDate</span><span class=\"params\">(Date creationDate)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.creationDate = creationDate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getModifyBy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> modifyBy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setModifyBy</span><span class=\"params\">(Integer modifyBy)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.modifyBy = modifyBy;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">getModifyDate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> modifyDate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setModifyDate</span><span class=\"params\">(Date modifyDate)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.modifyDate = modifyDate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;User&#123;&quot;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;id=&quot;</span> + id +</span><br><span class=\"line\">                <span class=\"string\">&quot;, userCode=&#x27;&quot;</span> + userCode + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;, userName=&#x27;&quot;</span> + userName + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;, userPassword=&#x27;&quot;</span> + userPassword + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;, gender=&quot;</span> + gender +</span><br><span class=\"line\">                <span class=\"string\">&quot;, birthday=&quot;</span> + birthday +</span><br><span class=\"line\">                <span class=\"string\">&quot;, phone=&#x27;&quot;</span> + phone + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;, address=&#x27;&quot;</span> + address + <span class=\"string\">&#x27;\\&#x27;&#x27;</span> +</span><br><span class=\"line\">                <span class=\"string\">&quot;, userRole=&quot;</span> + userRole +</span><br><span class=\"line\">                <span class=\"string\">&quot;, createdBy=&quot;</span> + createdBy +</span><br><span class=\"line\">                <span class=\"string\">&quot;, creationDate=&quot;</span> + creationDate +</span><br><span class=\"line\">                <span class=\"string\">&quot;, modifyBy=&quot;</span> + modifyBy +</span><br><span class=\"line\">                <span class=\"string\">&quot;, modifyDate=&quot;</span> + modifyDate +</span><br><span class=\"line\">                <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"创建sql映射文件\"><a class=\"anchor\" href=\"#创建sql映射文件\">#</a> 创建 SQL 映射文件</h4>\n<blockquote>\n<p>在 resources/mapper 目录下创建 SQL 映射文件，以 <code>实体类名称</code>  + <code>Mapper</code>  命名。</p>\n</blockquote>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">mapper</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- mapper标签：执行增删改查 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- namespace属性：映射文件的命名空间，在整个应用中必须唯一,属性值任意填写（如果使用接口编程，命名空间必须是接口的全限定类） --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;test&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 查询用户列表 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- select标签：用于执行select查询语句 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- id属性：必填且唯一，建议与接口的方法名称同名 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- resultType属性：返回值类型，该属性必填,要求：实体类的属性名必须与表中的列名或别名一致 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findUserList&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">        select  *  from smbms_user</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>\n<p>namespace 属性：映射文件的命名空间，在整个应用中必须唯一，属性值任意填写（如果使用接口编程，命名空间必须是接口的全限定类）</p>\n</li>\n<li>\n<p><code>&lt;select&gt;</code>  标签用于执行查询语句。</p>\n<ul>\n<li>\n<p>id 属性：必填且唯一，建议与接口的方法名称同名</p>\n</li>\n<li>\n<p>resultType 属性：返回值类型，该属性必填，<mark>要求：实体类的属性名必须与表中的列名或别名一致</mark></p>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"创建测试类\"><a class=\"anchor\" href=\"#创建测试类\">#</a> 创建测试类</h4>\n<ul>\n<li>调用 SQL 映射文件定义的方法，需要通过 <code>命名空间.标签ID名称</code> 的方式进行调用。</li>\n<li><code>selectList()</code>  方法返回多条记录。</li>\n</ul>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 查询所有用户</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    SqlSession sqlSession = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//读取mybatis配置文件</span></span><br><span class=\"line\">        InputStream inputStream = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//创建会话工厂对象</span></span><br><span class=\"line\">        SqlSessionFactory sessionFactory = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class=\"line\">        <span class=\"comment\">//打开Session</span></span><br><span class=\"line\">        sqlSession = sessionFactory.openSession();</span><br><span class=\"line\">        <span class=\"comment\">//执行查询（命名空间+.+标签ID名称）</span></span><br><span class=\"line\">        List&lt;User&gt; userList = sqlSession.selectList(<span class=\"string\">&quot;test.findUserList&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//循环遍历</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (User user : userList) &#123;</span><br><span class=\"line\">            System.out.println(user);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        <span class=\"comment\">//判断session是否为空，不为空则关闭资源</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(sqlSession!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            sqlSession.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"加载sql映射文件\"><a class=\"anchor\" href=\"#加载sql映射文件\">#</a> 加载 SQL 映射文件</h4>\n<p>在 MyBatis 核心配置文件中通过 <code>&lt;mappers&gt;</code>  元素加载 SQL 映射文件，关键代码如下：</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 加载映射文件 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 加载映射文件 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"mybatis核心对象\"><a class=\"anchor\" href=\"#mybatis核心对象\">#</a> MyBatis 核心对象</h2>\n<p>MyBatis 的核心接口和类主要有 3 个，分别是 <code>SqlSessionFactoryBuilder</code> 、 <code>SqlSessionFactory</code> 、 <code>SqlSession</code> 。MyBatis 核心接口和类的结构图如下所示：</p>\n<p><img data-src=\"C:%5CUsers%5C25442%5CAppData%5CLocal%5CTemp%5CRar$DIa33512.16536%5Cimages%5Cimage-20200830113813370.png\" alt=\"image-20200830113813370\" /></p>\n<ol>\n<li>每个 MyBatis 的应用程序都以一个 <code>SqlSessionFactory</code>  对象的实例为核心</li>\n<li>可以根据 XML 配置文件或 Configuration 类的实例创建 SqlSessionFactoryBuilder 对象</li>\n<li>通过 SqlSessionFactoryBuilder 对象获取 SqlSessionFactory 会话工厂对象</li>\n<li>通过 SQLSessionFactory 对象获取 SqlSession 实例，在 SqlSession 对象中包含了所有执行数据库操作的方法。</li>\n</ol>\n<h3 id=\"sqlsessionfactorybuilder\"><a class=\"anchor\" href=\"#sqlsessionfactorybuilder\">#</a> SqlSessionFactoryBuilder</h3>\n<ul>\n<li>通过 <code>SqlSessionFactoryBuilder</code>  创建会话工厂 <code>SqlSessionFactory</code></li>\n<li>将 <code>SqlSessionFactoryBuilder</code>  当成一个工具类使用即可，不需要使用单例管理 <code>SqlSessionFactoryBuilder</code></li>\n<li>在需要创建 <code>SqlSessionFactory</code>  时候，只需要 new 一次 <code>SqlSessionFactoryBuilder</code>  即可</li>\n<li><code>SqlSessionFactoryBuilder</code>  最大的特点是用过即丢。一旦创建了 <code>SqlSessionFactory</code>  对象，这个类就不需要了。因此 <code>SqlSessionFactoryBuilder</code>  的最佳使用范围就是存在于方法体内，也就是局部变量</li>\n</ul>\n<h3 id=\"sqlsessionfactory\"><a class=\"anchor\" href=\"#sqlsessionfactory\">#</a> SqlSessionFactory</h3>\n<ul>\n<li>通过 <code>SqlSessionFactory</code>  创建 <code>SqlSession</code> ，使用单例模式管理 <code>sqlSessionFactory</code> （工厂一旦创建，使用一个实例）</li>\n<li>所有 MyBatis 应用都是以 <code>SqlSessionFactory</code>  实例为中心，该对象一旦创建，就会在整个应用运行过程中始终存在。没有理由去销毁或再创建它，并且在应用运行中也不建议多次创建 SqlSessionFactory，因此最佳作用域是 Application，也就是全局变量。</li>\n</ul>\n<h3 id=\"sqlsession\"><a class=\"anchor\" href=\"#sqlsession\">#</a> SqlSession</h3>\n<ul>\n<li>SqlSession 适用于执行持久化操作的对象</li>\n<li>SqlSession 对应着一次数据库会话，由于数据库会话不是永久的，因此 SqlSession 最佳应用场合在方法体内，定义成局部变量使用。</li>\n<li>若 SqlSession 被关闭，则需要重新创建 SqlSession 对象</li>\n<li>使用 SqlSession 的方式有两种，分别是：\n<ol>\n<li>基于 SqlSession 实例直接执行映射文件的 SQL 语句。</li>\n<li>基于 Mapper 接口方式操作数据 &lt;font color=red&gt;(官方推荐)&lt;/font&gt;。</li>\n</ol>\n</li>\n</ul>\n<p>&lt;font color=red&gt; 注意：每个线程都有自己的 SqlSession 实例，SqlSession 实例不能被共享，也不是线程安全的。因此最佳的作用域范围是 request 作用域或者方法体作用域。&lt;/font&gt;</p>\n<h3 id=\"小结\"><a class=\"anchor\" href=\"#小结\">#</a> 小结</h3>\n<table>\n<thead>\n<tr>\n<th>对象</th>\n<th>作用</th>\n<th>生命周期</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>SqlSessionFactoryBuilder</td>\n<td>用于创建 SqlSessionFactory 对象</td>\n<td>方法体内（局部变量）</td>\n</tr>\n<tr>\n<td>SqlSessionFactory</td>\n<td>用于创建 SqlSession 对象</td>\n<td><strong>应用程序（成员变量）</strong></td>\n</tr>\n<tr>\n<td>SqlSession</td>\n<td>执行增删改查</td>\n<td>方法体内（局部变量）</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"基于sqlsession实例执行sql语句\"><a class=\"anchor\" href=\"#基于sqlsession实例执行sql语句\">#</a> 基于 SqlSession 实例执行 SQL 语句</h2>\n<h3 id=\"案例1根据用户编码模糊查询\"><a class=\"anchor\" href=\"#案例1根据用户编码模糊查询\">#</a> 案例 1：根据用户编码模糊查询</h3>\n<h4 id=\"usermapperxml映射文件\"><a class=\"anchor\" href=\"#usermapperxml映射文件\">#</a> UserMapper.xml 映射文件</h4>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">mapper</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- mapper标签：执行增删改查 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- namespace属性：映射文件的命名空间，在整个应用中必须唯一,属性值任意填写（如果使用接口编程，命名空间必须是接口的全限定类） --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 需求：根据用户编码模糊查询 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- parameterType属性：指定参数数的据类型（可以是全类名或别名），可以省略不写 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        占位符：</span></span><br><span class=\"line\"><span class=\"comment\">            1.#&#123;占位符名称&#125;:占位符名称可以自定义</span></span><br><span class=\"line\"><span class=\"comment\">                三个前提：1.方法中只有1个参数且是简单数据类型（基本数据类型、String）</span></span><br><span class=\"line\"><span class=\"comment\">                        2.方法参数是类类型，占位符名称必须是实体类的属性名且严格区分大小写</span></span><br><span class=\"line\"><span class=\"comment\">                        3.方法参数2个或2个以上，必须使用@Param注解</span></span><br><span class=\"line\"><span class=\"comment\">            2.$&#123;占位符名称&#125;：如果参数是简单数据类型（基本数据类型、String），占位符名称只能填写成value</span></span><br><span class=\"line\"><span class=\"comment\">     --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findUserListByUserCode&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;String&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from smbms_user where userCode like concat(&#x27;%&#x27;,#&#123;userCode&#125;,&#x27;%&#x27;)</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类\"><a class=\"anchor\" href=\"#测试类\">#</a> 测试类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 根据用户编码查询用户列表</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    SqlSession sqlSession = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//读取mybatis配置文件</span></span><br><span class=\"line\">        InputStream inputStream = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//创建会话工厂对象</span></span><br><span class=\"line\">        SqlSessionFactory sessionFactory = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class=\"line\">        <span class=\"comment\">//打开Session</span></span><br><span class=\"line\">        sqlSession = sessionFactory.openSession();</span><br><span class=\"line\">        <span class=\"comment\">//执行查询（命名空间+.+标签ID名称）</span></span><br><span class=\"line\">        List&lt;User&gt; userList = sqlSession.selectList(<span class=\"string\">&quot;test.findUserListByUserCode&quot;</span>,<span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//循环遍历</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (User user : userList) &#123;</span><br><span class=\"line\">            System.out.println(user);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        <span class=\"comment\">//判断session是否为空，不为空则关闭资源</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(sqlSession!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            sqlSession.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"案例2统计用户数量\"><a class=\"anchor\" href=\"#案例2统计用户数量\">#</a> 案例 2：统计用户数量</h3>\n<h4 id=\"usermapperxml\"><a class=\"anchor\" href=\"#usermapperxml\">#</a> UserMapper.xml</h4>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">mapper</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;test&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 统计用户数量 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;getTotalCount&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;int&quot;</span>&gt;</span></span><br><span class=\"line\">        select count(1) from smbms_user</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类-2\"><a class=\"anchor\" href=\"#测试类-2\">#</a> 测试类</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 统计用户数量</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test3</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    SqlSession sqlSession = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//读取mybatis配置文件</span></span><br><span class=\"line\">        InputStream inputStream = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//创建会话工厂对象</span></span><br><span class=\"line\">        SqlSessionFactory sessionFactory = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class=\"line\">        <span class=\"comment\">//打开Session</span></span><br><span class=\"line\">        sqlSession = sessionFactory.openSession();</span><br><span class=\"line\">        <span class=\"comment\">//执行查询（命名空间+.+标签ID名称）</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> count = sqlSession.selectOne(<span class=\"string\">&quot;test.getTotalCount&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//输出</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;用户数量：&quot;</span>+count);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">        <span class=\"comment\">//判断session是否为空，不为空则关闭资源</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(sqlSession!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            sqlSession.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"总结\"><a class=\"anchor\" href=\"#总结\">#</a> 总结</h3>\n<h4 id=\"parametertype\"><a class=\"anchor\" href=\"#parametertype\">#</a> parameterType</h4>\n<p>在映射文件中通过 parameterType 指定输入参数的类型 (参数的数据类型)，该属性可以省略不写</p>\n<h4 id=\"resulttype\"><a class=\"anchor\" href=\"#resulttype\">#</a> resultType</h4>\n<p>在映射文件中通过 resultType 指定输出结果的类型（返回值类型）</p>\n<p>使用 resultType 属性配置返回值类型要求：<strong>实体类属性名称必须与表中的列名或别名一致</strong></p>\n<h4 id=\"和\"><a class=\"anchor\" href=\"#和\">#</a> #{} 和 ${}</h4>\n<h5 id=\"\"><a class=\"anchor\" href=\"#\">#</a> #{}</h5>\n<ol>\n<li>\n<p>#{} 表示一个占位符号，#{} 接收输入参数，类型可以是简单类型 (基本类型)，pojo (实体类)、hashmap。</p>\n</li>\n<li>\n<p>如果接收简单类型，#{} 中的占位符可以自定义。</p>\n</li>\n<li>\n<p>#{} 接收 pojo 对象值，通过 OGNL 读取对象中的属性值，通过属性。属性。属性... 的方式获取对象属性值。</p>\n</li>\n</ol>\n<h5 id=\"-2\"><a class=\"anchor\" href=\"#-2\">#</a> ${}</h5>\n<ol>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow></mrow><mtext>表示一个拼接符号，会引发</mtext><mi>s</mi><mi>q</mi><mi>l</mi><mtext>注入，所以不建议使用</mtext></mrow><annotation encoding=\"application/x-tex\">{}表示一个拼接符号，会引发sql注入，所以不建议使用</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"></span><span class=\"mord cjk_fallback\">表</span><span class=\"mord cjk_fallback\">示</span><span class=\"mord cjk_fallback\">一</span><span class=\"mord cjk_fallback\">个</span><span class=\"mord cjk_fallback\">拼</span><span class=\"mord cjk_fallback\">接</span><span class=\"mord cjk_fallback\">符</span><span class=\"mord cjk_fallback\">号</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord cjk_fallback\">会</span><span class=\"mord cjk_fallback\">引</span><span class=\"mord cjk_fallback\">发</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord cjk_fallback\">注</span><span class=\"mord cjk_fallback\">入</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord cjk_fallback\">所</span><span class=\"mord cjk_fallback\">以</span><span class=\"mord cjk_fallback\">不</span><span class=\"mord cjk_fallback\">建</span><span class=\"mord cjk_fallback\">议</span><span class=\"mord cjk_fallback\">使</span><span class=\"mord cjk_fallback\">用</span></span></span></span> {}。</p>\n</li>\n<li>\n<p>${} 接收输入参数，类型可以是简单类型，pojo、hashmap。</p>\n</li>\n<li>\n<p>如果接收简单类型，${} 中只能写成 value。</p>\n</li>\n<li>\n<p>${} 接收 pojo 对象值，通过 OGNL 读取对象中的属性值，通过属性。属性。属性... 的方式获取对象属性值。</p>\n</li>\n</ol>\n<h4 id=\"selectone和selectlist\"><a class=\"anchor\" href=\"#selectone和selectlist\">#</a> selectOne () 和 selectList ()</h4>\n<ol>\n<li><code>selectOne()</code>  表示查询出一条记录进行映射。如果使用 <code>selectOne(</code> ) 可以实现使用 <code>selectList()</code>  也可以实现（list 中只有一个对象）。<mark>注意：只能返回一条记录，返回多条会报错。</mark></li>\n<li><code>selectList()</code>  表示查询出一个列表（多条记录）进行映射。如果使用 <code>selectList()</code>  查询多条记录，不能使用 <code>selectOne()</code> 。</li>\n</ol>\n<h2 id=\"基于mapper接口方式\"><a class=\"anchor\" href=\"#基于mapper接口方式\">#</a> 基于 Mapper 接口方式</h2>\n<h3 id=\"概述\"><a class=\"anchor\" href=\"#概述\">#</a> 概述</h3>\n<p>基于 Mapper 接口方式是 MyBatis 官方推荐使用的，该方式的表达方式也更加直白，代码更加清晰，类型更加安全，无需担心易错的字符串字面值及强制类型转换等。</p>\n<p>基于 Mapper 接口实现功能开发，dao 数据访问层的接口不需要实现类，使用接口 + Mapper 映射文件实现功能开发即可，但是必须遵守以下规则：</p>\n<ol>\n<li>mapper 映射文件的命名空间必须是 maper 接口的全限定类名</li>\n<li>mapper 映射文件的标签 id 值必须与 mapper 接口中的方法名称同名</li>\n</ol>\n<h3 id=\"基于mapper接口方式实现功能开发\"><a class=\"anchor\" href=\"#基于mapper接口方式实现功能开发\">#</a> 基于 Mapper 接口方式实现功能开发</h3>\n<h4 id=\"定义mapper接口\"><a class=\"anchor\" href=\"#定义mapper接口\">#</a> 定义 Mapper 接口</h4>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.manong.dao;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.manong.entity.User;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 根据用户编码查询用户信息</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> userCode</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;User&gt; <span class=\"title\">findUserListByUserCode</span><span class=\"params\">(String userCode)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"创建mapper映射文件\"><a class=\"anchor\" href=\"#创建mapper映射文件\">#</a> 创建 Mapper 映射文件</h4>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 要求1：命名空间必须是接口的全限定类名 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.manong.dao.UserMapper&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 要求2：id名称必须与接口中的方法名一致 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- resultType属性：可以填写类的全限定类名或别名 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findUserListByUserCode&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;string&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from smbms_user where userCode like concat(&quot;%&quot;,#&#123;userCode&#125;,&quot;%&quot;)</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"加载映射文件\"><a class=\"anchor\" href=\"#加载映射文件\">#</a> 加载映射文件</h4>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 加载映射文件 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 加载映射文件 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"测试类-3\"><a class=\"anchor\" href=\"#测试类-3\">#</a> 测试类</h4>\n<p><code>注意：获取UserMapper接口实例，通过getMapper(Mapper.class)执行Mapper接口方法实现持久化操作。</code></p>\n<p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestUser</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        SqlSession sqlSession = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//读取mybatis配置文件</span></span><br><span class=\"line\">            InputStream inputStream = Resources.getResourceAsStream(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//创建会话工厂对象</span></span><br><span class=\"line\">            SqlSessionFactory sessionFactory = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class=\"line\">            <span class=\"comment\">//打开Session</span></span><br><span class=\"line\">            sqlSession = sessionFactory.openSession();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//通过动态代理方式获取UserMapper接口</span></span><br><span class=\"line\">            UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class=\"line\">            <span class=\"comment\">//调用根据用户名查询用户列表的方法</span></span><br><span class=\"line\">            List&lt;User&gt; userList = userMapper.findUserListByUserCode(<span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (User user : userList) &#123;</span><br><span class=\"line\">                System.out.println(user);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//关闭资源</span></span><br><span class=\"line\">            <span class=\"comment\">//判断session是否为空，不为空则关闭资源</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(sqlSession!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                sqlSession.close();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"mybatis核心配置文件\"><a class=\"anchor\" href=\"#mybatis核心配置文件\">#</a> MyBatis 核心配置文件</h2>\n<h3 id=\"配置文件结构\"><a class=\"anchor\" href=\"#配置文件结构\">#</a> 配置文件结构</h3>\n<p>MyBatis 核心配置文件的元素节点 (标签) 是有先后顺序的，其文件架构如下图所示：</p>\n<p><img data-src=\"C:%5CUsers%5C25442%5CAppData%5CLocal%5CTemp%5CRar$DIa33512.16536%5Cimages%5Cimage-20200830134334643.png\" alt=\"image-20200830134334643\" /></p>\n<h3 id=\"properties元素\"><a class=\"anchor\" href=\"#properties元素\">#</a> properties 元素</h3>\n<h4 id=\"编写属性文件databaseproperties\"><a class=\"anchor\" href=\"#编写属性文件databaseproperties\">#</a> 编写属性文件 (database.properties)</h4>\n<p><figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#数据库驱动</span></span><br><span class=\"line\"><span class=\"attr\">driver</span> = <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\"><span class=\"comment\">#数据库连接url</span></span><br><span class=\"line\"><span class=\"attr\">url</span> = <span class=\"string\">jdbc:mysql://localhost:3306/smbms?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=UTC</span></span><br><span class=\"line\"><span class=\"comment\">#数据库用户名</span></span><br><span class=\"line\"><span class=\"attr\">user</span> = <span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"comment\">#数据库密码</span></span><br><span class=\"line\"><span class=\"attr\">password</span> = <span class=\"string\">root</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"引入外部属性文件\"><a class=\"anchor\" href=\"#引入外部属性文件\">#</a> 引入外部属性文件</h4>\n<p>在 mybatis 核心配置文件中引入外部属性文件 ，关键代码如下所示：</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">configuration</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 加载外部的属性文件 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">properties</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;database.properties&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 配置数据库环境 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 该default属性必填，指定的值必须是存在的 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environments</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;mysql&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 配置单个数据库环境 --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- environment标签：用于配置数据库环境 --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- id属性：在整个应用环境中必须唯一 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;mysql&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 事务管理器:JDBC、Manage --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">transactionManager</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 数据源：POOLED,JNDI,UNPOOLED --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dataSource</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;POOLED&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 数据库驱动 --&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driver&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 数据库连接地址 --&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 数据库用户名 --&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;user&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- 数据库密码 --&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dataSource</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environments</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"setting元素\"><a class=\"anchor\" href=\"#setting元素\">#</a> setting 元素</h3>\n<p>Setting 元素的作用是设置一些非重要的选项，用于设置和改变 MyBatis 运行中的行为。常用的配置如下所示：</p>\n<p><img data-src=\"C:%5CUsers%5C25442%5CAppData%5CLocal%5CTemp%5CRar$DIa33512.16536%5Cimages%5Cimage-20200830135147160.png\" alt=\"image-20200830135147160\" /></p>\n<p>其它属性配置请参考<span class=\"exturl\" data-url=\"aHR0cHM6Ly9teWJhdGlzLm9yZy9teWJhdGlzLTMvemgvY29uZmlndXJhdGlvbi5odG1sI3NldHRpbmdz\">属性设置</span>：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9teWJhdGlzLm9yZy9teWJhdGlzLTMvemgvY29uZmlndXJhdGlvbi5odG1sI3NldHRpbmdz\">https://mybatis.org/mybatis-3/zh/configuration.html#settings</span></p>\n<h3 id=\"设置别名typealiases元素\"><a class=\"anchor\" href=\"#设置别名typealiases元素\">#</a> 设置别名 ——typeAliases 元素</h3>\n<h4 id=\"概述-2\"><a class=\"anchor\" href=\"#概述-2\">#</a> 概述</h4>\n<p>typeAliases 元素的作用是配置类型别名，通过与 MyBatis 的 SQL 映射文件相关联，减少输入多余的完整类名，以简化操作（别名不区分大小写）。</p>\n<h4 id=\"单个设置别名\"><a class=\"anchor\" href=\"#单个设置别名\">#</a> 单个设置别名</h4>\n<p>单个设置别名的方式弊端在于，如果一个项目中有多个实体类 (POJO)，需要对每一个实体类进行设置。</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 设置别名 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">typeAliases</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 单个设置别名 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- type属性：类的全限定名(路径) --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- alias属性：别名（自定义） --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">typeAlias</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span> <span class=\"attr\">alias</span>=<span class=\"string\">&quot;user&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"批量设置别名\"><a class=\"anchor\" href=\"#批量设置别名\">#</a> 批量设置别名</h4>\n<p>批量设置别名，就是通过 <code>&lt;package&gt;</code>  元素的 name 属性直接指定包名，MyBatis 会自动扫描指定包下的 JavaBean，并设置一个别名，默认的别名名称就是实体类的类名 (不区分大小写)。</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 设置别名 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">typeAliases</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 批量设置别名 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 以类名作为别名，不区分大小写 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;com.manong.entity&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"使用别名\"><a class=\"anchor\" href=\"#使用别名\">#</a> 使用别名</h4>\n<p>在 mapper 映射文件中可以使用定义好的别名，比如在 parameterType 属性、resultType 属性上使用别名，关键代码如下：</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 要求1：命名空间必须是接口的全限定类名 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.manong.dao.UserMapper&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 要求2：id名称必须与接口中的方法名一致 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- resultType属性：可以填写类的全限定类名或别名 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;findUserListByUserCode&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;string&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.manong.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from smbms_user where userCode like concat(&quot;%&quot;,#&#123;userCode&#125;,&quot;%&quot;)</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p><mark>注意：使用别名简化持久化类的全限定类名前，必须预定义好别名，只有预先设置了别名，才能够使用别名；定义别名后也可以使用类的全限定类名。</mark></p>\n<h4 id=\"mybatis内置别名\"><a class=\"anchor\" href=\"#mybatis内置别名\">#</a> MyBatis 内置别名</h4>\n<p>下面是一些为常见的 Java 类型内建的类型别名。它们都是不区分大小写的，注意，为了应对原始类型的命名重复，采取了特殊的命名风格。</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">别名</th>\n<th style=\"text-align:left\">映射的类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">_byte</td>\n<td style=\"text-align:left\">byte</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">_long</td>\n<td style=\"text-align:left\">long</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">_short</td>\n<td style=\"text-align:left\">short</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">_int</td>\n<td style=\"text-align:left\">int</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">_integer</td>\n<td style=\"text-align:left\">int</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">_double</td>\n<td style=\"text-align:left\">double</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">_float</td>\n<td style=\"text-align:left\">float</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">_boolean</td>\n<td style=\"text-align:left\">boolean</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">String</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">byte</td>\n<td style=\"text-align:left\">Byte</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">long</td>\n<td style=\"text-align:left\">Long</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">short</td>\n<td style=\"text-align:left\">Short</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:left\">Integer</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">integer</td>\n<td style=\"text-align:left\">Integer</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">double</td>\n<td style=\"text-align:left\">Double</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">float</td>\n<td style=\"text-align:left\">Float</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:left\">Boolean</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">date</td>\n<td style=\"text-align:left\">Date</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">decimal</td>\n<td style=\"text-align:left\">BigDecimal</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">bigdecimal</td>\n<td style=\"text-align:left\">BigDecimal</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">object</td>\n<td style=\"text-align:left\">Object</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">map</td>\n<td style=\"text-align:left\">Map</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">hashmap</td>\n<td style=\"text-align:left\">HashMap</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">list</td>\n<td style=\"text-align:left\">List</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">arraylist</td>\n<td style=\"text-align:left\">ArrayList</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">collection</td>\n<td style=\"text-align:left\">Collection</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">iterator</td>\n<td style=\"text-align:left\">Iterator</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"environments元素\"><a class=\"anchor\" href=\"#environments元素\">#</a> environments 元素</h3>\n<p>MyBatis 可以配置多套运行环境，如开发环境，测试环境，生产环境等。可以灵活选择不同的配置，从而将 SQL 映射不到不同的数据库环境上。不同的运行环境可以通过 environments 元素来配置，但是不管增加几套运行环境，都必须明确选择出当前唯一的一个运行环境。</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 配置数据库环境 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 该default属性必填，指定的值必须是存在的 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">environments</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;mysql&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 配置单个数据库环境 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- environment标签：用于配置数据库环境--&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- id属性：在整个应用环境中必须唯一 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;mysql&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 事务管理器:JDBC、MANAGED --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">transactionManager</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 数据源：POOLED,JNDI,UNPOOLED --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dataSource</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;POOLED&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 数据库驱动 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driver&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 数据库连接地址 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 数据库用户名 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;user&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!-- 数据库密码 --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dataSource</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">environments</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<ol>\n<li>environments：表示配置 MyBatis 的多套运行环境，将 SQL 映射到多个不同的数据库上，该元素节点下可以配置多个 environment 子元素节点，但是必须指定其中一个为默认的运行环境。</li>\n<li>默认的运行环境 ID：通过 default 属性指定当前的运行环境 ID，对于运行环境 ID 的命名必须确保唯一。</li>\n<li>transactionManager 事务管理器：MyBatis 有两种事务管理器，分别是 JDBC、MANAGED。</li>\n<li>dataSource 数据源类型：MyBatis 提供了 3 种数据源类型，分别是：POOLED、JNDI、UNPOOLED。</li>\n</ol>\n<h3 id=\"加载映射文件mappers元素\"><a class=\"anchor\" href=\"#加载映射文件mappers元素\">#</a> 加载映射文件 ——mappers 元素</h3>\n<p>mappers 映射其用来定义 SQL 的映射语句，可以使用类资源路径或 URL 等方式告诉 MyBatis 去到找到相应的 SQL 语句。</p>\n<h4 id=\"加载单个映射文件\"><a class=\"anchor\" href=\"#加载单个映射文件\">#</a> 加载单个映射文件</h4>\n<p>(1). 使用 resource 属性获取资源</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 加载映射文件 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>(2). 使用 url 属性获取资源</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 加载映射文件 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">url</span>=<span class=\"string\">&quot;file:///E:/SMBMS/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>(3). 使用 class 属性获取资源</p>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 加载mapper接口 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;com.manong.dao.UserMapper&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p><code>注意：class属性获取资源是基于注解实现MyBatis。</code></p>\n<h4 id=\"批量加载映射文件\"><a class=\"anchor\" href=\"#批量加载映射文件\">#</a> 批量加载映射文件</h4>\n<p>批量加载映射文件需要遵守以下要求：</p>\n<ol>\n<li>要求 1：映射文件名称必须与接口名称同名</li>\n<li>要求 2：映射文件名称必须与接口在相同目录下</li>\n</ol>\n<p><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 批量加载 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;com.manong.dao&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"mybatis-hibernate和jdbc\"><a class=\"anchor\" href=\"#mybatis-hibernate和jdbc\">#</a> MyBatis、Hibernate 和 JDBC</h2>\n<h3 id=\"mybatis与hibernate的区别\"><a class=\"anchor\" href=\"#mybatis与hibernate的区别\">#</a> MyBatis 与 Hibernate 的区别</h3>\n<ol>\n<li>mybatis 是半自动化框架，需要编写 SQL 语句，灵活性强，hibernate 完全自动化框架，面向对象，与数据库无关，不要写编写 SQL 语句</li>\n<li>mybatis 移植性差，hibernate 移植性好</li>\n</ol>\n<h3 id=\"mybatis-hibernate和jdbc比较\"><a class=\"anchor\" href=\"#mybatis-hibernate和jdbc比较\">#</a> MyBatis、Hibernate 和 JDBC 比较</h3>\n<table>\n<thead>\n<tr>\n<th>技术</th>\n<th>性能</th>\n<th>移植性</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>jdbc</td>\n<td>最好</td>\n<td>中等</td>\n</tr>\n<tr>\n<td>hibernate</td>\n<td>最差</td>\n<td>最好</td>\n</tr>\n<tr>\n<td>mybatis</td>\n<td>中等</td>\n<td>最差</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": []
        }
    ]
}